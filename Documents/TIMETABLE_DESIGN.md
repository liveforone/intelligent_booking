# 타임테이블 설계

## 상세 설계
* 타임테이블은 장소의 예약 가능한 시간을 담은 시간표입니다.
* 타임테이블은 두가지 방법으로 사용이 가능한데, 이는 예약 방법에 따라 선택하면됩니다.
* 첫번째는 순차적 예약입니다. 순번이 있는 예약의 경우 하루 예약 가능자가 정해져있고, 순차적으로 예약을 받습니다.
* 즉 시간대별이 아니라, 하루 전체를 통틀어 순차적으로 예약을 받는 시스템을 의미합니다.
* 흔히 웨이팅의 경우 이러한 예약 방식을 사용하는데, 이러한 예약을 할때에는 타임테이블을 하나만 등록하고,
* 영업 시작 시간을 예약 가능시간으로 설정한 후에 원하는 예약 가능자수만 명시하면됩니다.
* 두번째는 시간대별 예약으로, 시간대별로 타임테이블을 등록하면됩니다.
* 타임테이블은 23시 59분이 되면 스케줄러가 작동하여 타임테이블의 모든 잔여예약자수를 장소에서 정한 타임테이블 예약가능자수
* 즉 basicCount의 수에 맞추어 복구 시킵니다. 따라서 새벽 12시 00분 부터는 새롭게 예약을 받을 수 있습니다.
* 타임테이블은 자유롭게 삭제가 가능합니다.
* 타임테이블은 장소가 삭제될때 벌크연산을 통해 자동으로 모두 삭제됩니다.

## 타임테이블 동작 방식(재사용방식)
* 타임테이블은 basicCount라는 필드와
* remainingCount 라는 필드가 있습니다.
* 클라이언트 에게는 remainingCount 필드만 전송되며, 이는 잔여 예약 가능자 수입니다.
* basicCount는 기본 잔여 예약 가능자 수로, 이 값은 변경되지 않습니다.
* 23시 59분에 스케줄러를 이용해 remainingCount의 값은 다음날 부터 새롭게 예약을 받을 수 있도록 복구합니다.
* 복구할때 기준이 되는 값이 basicCount입니다.

## 예약 방식에 따른 타임테이블 설정
* 기본적으로 타임테이블에 존재하는 시간과 분은 예약하려는 시간과 분을 의미합니다.
* 그러나 위에서 설명한 대로 순차적 예약방식으로 사용하는 경우에는 조금 달라집니다.
* 바로 실행되는 시간입니다. 즉 예약을 하려는 시간과 분이 존재하지 않고 그 시간부터 영업 마감 시간까지
* 예약을 하게되면 순서가 배정되고 순차적으로 입장이 가능합니다.
* 이러한 경우가 메인이 되지 않게 시스템을 설계하였으나, 포용이 가능하게 설계되었으므로 위처럼 사용하시면됩니다.\

## API 설계
```
[GET] /timetable/detail/{uuid} : 타임테이블 상세조회
[GET] /timetable/place/{placeUUID} : 장소에 속한 모든 타임테이블 조회, 20개씩 페이징, lastUUID 입력받아 no-offset 사용
[POST] /timetable/create : 타임테이블 생성 
[PUT] /timetable/update/description/{uuid} : 설명 변경
[DELETE] /timetable/delete/{uuid} : 타임테이블 삭제
```

## Json Body 예시
```json
[CreateTimetable]
{
  "placeUUID": "b07e1235-9bb9-411b-a408-c3affce874dc",
  "basicCount": 5,
  "reservationHour": 12,
  "reservationMinute": 35,
  "description": "test_description1"
}

[UpdateDescription]
{
  "description": "updated_description"
}
```